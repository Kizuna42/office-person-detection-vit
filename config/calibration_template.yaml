# 座標変換・キャリブレーション設定テンプレート（高精度版）
#
# 使い方:
#   1. このファイルを参考に config.yaml の camera_params セクションを設定
#   2. カメラパラメータは tools/calibration_tool.py で自動推定または手動調整
#
# 注意: 旧システムの homography セクションは不要になりました。
#       新しいシステムでは camera_params を使用します。

# カメラパラメータ（高精度ピンホールカメラモデル）
camera_params:
  # --- 外部パラメータ (Extrinsics) ---
  height_m: 2.2          # カメラの設置高さ [メートル]
  pitch_deg: 45.0        # 俯角 [度] (0=水平, 正=下向き)
  yaw_deg: 0.0           # 方位角 [度] (0=前方, 正=右回転)
  roll_deg: 0.0          # 回転角 [度] (通常は0)

  # カメラ位置（World座標系）[メートル]
  camera_x_m: 0.0        # カメラ直下を原点とする相対位置X
  camera_y_m: 0.0        # カメラ直下を原点とする相対位置Y

  # カメラ位置（フロアマップ座標系）[ピクセル]
  position_x_px: 1200.0  # フロアマップ上でのカメラX位置
  position_y_px: 800.0   # フロアマップ上でのカメラY位置

  # --- 内部パラメータ (Intrinsics) ---
  focal_length_x: 1250.0  # 焦点距離X [ピクセル]
  focal_length_y: 1250.0  # 焦点距離Y [ピクセル]
  center_x: 640.0         # 主点X [ピクセル] (通常は画像幅/2)
  center_y: 360.0         # 主点Y [ピクセル] (通常は画像高さ/2)
  image_width: 1280       # 画像幅 [ピクセル]
  image_height: 720       # 画像高さ [ピクセル]

  # 歪み係数 [k1, k2, p1, p2, k3]
  # 通常のレンズ: [0, 0, 0, 0, 0]
  dist_coeffs: [0.0, 0.0, 0.0, 0.0, 0.0]

# キャリブレーション設定
calibration:
  mode: "hybrid"  # "auto" | "manual" | "hybrid"
  correspondence_file: "output/calibration/correspondence_points_cam01.json"
  optimization:
    max_iterations: 100
    tolerance: 1.0e-6

# フロアマップ設定
floormap:
  image_path: "data/floormap.png"
  image_width: 1878
  image_height: 1369
  image_origin_x: 7
  image_origin_y: 9
  image_x_mm_per_pixel: 28.1926406926406
  image_y_mm_per_pixel: 28.241430700447

# ゾーン定義
zones:
  - id: "zone_1"
    name: "左エリア"
    priority: 1
    polygon:
      - [859, 912]
      - [1095, 912]
      - [1095, 1350]
      - [859, 1350]
  - id: "zone_2"
    name: "中央エリア"
    priority: 2
    polygon:
      - [1095, 912]
      - [1331, 912]
      - [1331, 1350]
      - [1095, 1350]

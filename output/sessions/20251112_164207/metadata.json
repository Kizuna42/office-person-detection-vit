{
  "session_id": "20251112_164207",
  "timestamp": "2025-11-12T16:42:07.455473",
  "config": {
    "video": {
      "input_path": "input/merged_moviefiles.mov",
      "is_timelapse": true,
      "frame_interval_minutes": 5,
      "tolerance_seconds": 60,
      "scan_margin_minutes": 5,
      "fps": 30
    },
    "detection": {
      "model_name": "facebook/detr-resnet-50",
      "confidence_threshold": 0.5,
      "nms_threshold": 0.4,
      "patch_size": 16,
      "device": "mps",
      "batch_size": 4
    },
    "floormap": {
      "image_path": "data/floormap.png",
      "image_width": 1878,
      "image_height": 1369,
      "image_origin_x": 7,
      "image_origin_y": 9,
      "image_x_mm_per_pixel": 28.1926406926406,
      "image_y_mm_per_pixel": 28.241430700447
    },
    "homography": {
      "matrix": [
        [
          -0.7522441113290175,
          -3.2312558061641248,
          437.1587328344621
        ],
        [
          -1.363838393085345,
          -3.7773354566090913,
          1046.0306165051552
        ],
        [
          -0.0010622110702388956,
          -0.0038281055291385373,
          1.0
        ]
      ]
    },
    "camera": {
      "position_x": 859,
      "position_y": 1040,
      "height_m": 2.2,
      "show_on_floormap": true,
      "marker_color": [
        0,
        0,
        255
      ],
      "marker_size": 15
    },
    "zones": [
      {
        "id": "zone_1",
        "name": "ゾーン1（左）",
        "polygon": [
          [
            859,
            912
          ],
          [
            1095,
            912
          ],
          [
            1095,
            1350
          ],
          [
            859,
            1350
          ]
        ],
        "priority": 1
      },
      {
        "id": "zone_2",
        "name": "ゾーン2（中央）",
        "polygon": [
          [
            1095,
            912
          ],
          [
            1331,
            912
          ],
          [
            1331,
            1350
          ],
          [
            1095,
            1350
          ]
        ],
        "priority": 2
      },
      {
        "id": "zone_3",
        "name": "ゾーン3（右）",
        "polygon": [
          [
            1331,
            912
          ],
          [
            1567,
            912
          ],
          [
            1567,
            1350
          ],
          [
            1331,
            1350
          ]
        ],
        "priority": 3
      }
    ],
    "output": {
      "directory": "output",
      "use_session_management": true,
      "save_detection_images": true,
      "save_floormap_images": true,
      "save_side_by_side_video": true,
      "side_by_side_video_fps": 1.0,
      "debug_mode": false,
      "session": {
        "archive_days": 30,
        "delete_archive_days": 90
      }
    },
    "timestamp": {
      "extraction": {
        "confidence_threshold": 0.5,
        "retry_count": 3,
        "use_improved_validator": true,
        "use_weighted_consensus": false,
        "use_voting_consensus": false,
        "validator": {
          "base_tolerance_seconds": 300.0,
          "history_size": 10,
          "z_score_threshold": 3.0
        },
        "roi": {
          "x_ratio": 0.7,
          "y_ratio": 0.045,
          "width_ratio": 0.28,
          "height_ratio": 0.06
        }
      },
      "extraction_mode": "auto_targets",
      "auto_targets": {
        "max_frames": 100,
        "disable_validation": true
      },
      "sampling": {
        "coarse_interval_seconds": 1.0,
        "fine_interval_seconds": 0.033,
        "search_window_seconds": 0.1
      },
      "target": {
        "start_datetime": "2025-08-26 16:05:00",
        "end_datetime": "2025-08-29 13:45:00",
        "interval_minutes": 5,
        "tolerance_seconds": 10
      }
    },
    "ocr": {
      "engines": [
        "tesseract"
      ],
      "tesseract": {
        "config": "--psm 8 --oem 3",
        "whitelist": "0123456789/:  "
      }
    },
    "evaluation": {
      "ground_truth_path": "output/labels/result_fixed.json",
      "iou_threshold": 0.5
    },
    "tracking": {
      "enabled": true,
      "algorithm": "deepsort",
      "max_age": 30,
      "min_hits": 3,
      "iou_threshold": 0.3,
      "appearance_weight": 0.7,
      "motion_weight": 0.3
    },
    "calibration": {
      "use_distortion_correction": false,
      "use_intrinsics": false,
      "reprojection_error_threshold": 2.0,
      "intrinsics": {
        "focal_length_x": 800.0,
        "focal_length_y": 800.0,
        "principal_point_x": 640.0,
        "principal_point_y": 360.0,
        "image_width": 1280,
        "image_height": 720
      },
      "distortion": {
        "k1": 0.0,
        "k2": 0.0,
        "k3": 0.0,
        "p1": 0.0,
        "p2": 0.0
      }
    },
    "fine_tuning": {
      "enabled": false,
      "dataset_path": "data/office_dataset",
      "epochs": 50,
      "learning_rate": 0.0001,
      "batch_size": 8,
      "warmup_epochs": 5,
      "layer_decay": 0.65
    }
  },
  "arguments": {
    "config": "config.yaml",
    "debug": false,
    "evaluate": false,
    "fine_tune": false,
    "start_time": null,
    "end_time": null,
    "timestamps_only": false
  }
}
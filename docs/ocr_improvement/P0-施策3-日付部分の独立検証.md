# P0-施策 3: 日付部分の独立検証

## 優先度

**P0（緊急対応: 即座に実施）**

## 目的

日付と時刻を分離して検証し、日付部分の誤認識を防止する。

## 問題背景

- 日付と時刻が一体として処理されているため、日付部分の誤認識が検出しにくい
- 日付部分（YYYY/MM/DD）の誤認識が時刻部分（HH:MM:SS）に影響を与える
- 日付部分の独立検証により、誤認識を早期に発見できる

## 実装内容

### 1. 日付と時刻の分離 OCR

- 日付部分（YYYY/MM/DD）と時刻部分（HH:MM:SS）を独立して OCR 実行
- ROI 領域を 2 つに分割（日付領域、時刻領域）
- 各領域で最適な前処理を適用

### 2. 複数 OCR エンジンでのアンサンブル（日付部分）

- 日付部分は複数の OCR エンジン（Tesseract、PaddleOCR、EasyOCR）でアンサンブル
- 各エンジンの結果を重み付き投票
- 信頼度に基づく重み付け

### 3. 日付の妥当性チェック

- 月: 1-12 の範囲チェック
- 日: 1-31 の範囲チェック（月に応じた日数のチェックも実装）
- 年: 2000-2100 の範囲チェック
- 無効な日付の検出と警告

## 期待効果

**精度向上: 50-70%**

## 実装ファイル

- `src/timestamp/timestamp_extractor.py`（新規メソッド追加）
  - 新規メソッド: `_extract_date_independently()`
  - 新規メソッド: `_extract_time_independently()`
  - 新規メソッド: `_validate_date_format()`
  - `extract()`メソッドの修正

## 実装工数

**2-3 日**

## 検証方法

- 日付部分の独立検証の精度を測定
- 時刻部分への影響を評価
- 複数エンジンでのアンサンブル効果を評価

## 成功基準

- 日付部分の誤認識率 ≤ 5%
- 日付の妥当性チェック成功率 ≥ 98%
- 時刻部分への影響 ≤ 2%

## 関連施策

- 施策 1: 最初のフレーム検証と再試行メカニズム（連携可能）
- 施策 6: 複数 OCR エンジンのアンサンブル強化（P1、後続）
